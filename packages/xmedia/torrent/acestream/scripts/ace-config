#!/bin/sh
################################################################################
#      This file is part of Alex@ELEC - http://www.alexelec.ru
#      Copyright (C) 2011-present Alexandr Zuyev (alex@alexelec.ru)
################################################################################

ACEHOME_DIR="/storage/.config/acestream"
SERVICE_DIR="/storage/.cache/services"
ACELOG_FILE="/var/log/acestream.log"

[ -f $SERVICE_DIR/acestream.conf ] && . $SERVICE_DIR/acestream.conf

ACE_ARGS="--log-file $ACELOG_FILE --log-max-size 1048576"

if [ -f $ACEHOME_DIR/aceuser.conf ]; then
  . $ACEHOME_DIR/aceuser.conf
  if [ -n "$ACE_USER_ARGS" ]; then
    ACE_ARGS="$ACE_ARGS $ACE_USER_ARGS"
  fi
fi

[ $ACE_DEBUG == "1" ] && ACE_ARGS="$ACE_ARGS --debug-profile --log-debug 1 --log-modules root:D"

echo "ACE_ARGS=\"$ACE_ARGS\"" > /run/alexelec/acestream.conf
